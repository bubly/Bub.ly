(function(a){function k(f){if(a.facebox.settings.inited)return true;else a.facebox.settings.inited=true;a(document).trigger("init.facebox");e();var l=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=new RegExp(".("+l+")$","i");f&&a.extend(a.facebox.settings,f);a("body").append(a.facebox.settings.faceboxHtml);var i=[new Image,new Image];i[0].src=a.facebox.settings.closeImage;i[1].src=a.facebox.settings.loadingImage;a("#facebox").find(".b:first, .bl").each(function(){i.push(new Image);
i.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")});a("#facebox .close").click(a.facebox.close);a("#facebox .close_image").attr("src",a.facebox.settings.closeImage)}function b(){var f,l;if(self.pageYOffset){l=self.pageYOffset;f=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){l=document.documentElement.scrollTop;f=document.documentElement.scrollLeft}else if(document.body){l=document.body.scrollTop;f=document.body.scrollLeft}return new Array(f,
l)}function d(){var f;if(self.innerHeight)f=self.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)f=document.documentElement.clientHeight;else if(document.body)f=document.body.clientHeight;return f}function e(){var f=a.facebox.settings;f.loadingImage=f.loading_image||f.loadingImage;f.closeImage=f.close_image||f.closeImage;f.imageTypes=f.image_types||f.imageTypes;f.faceboxHtml=f.facebox_html||f.faceboxHtml}function g(f,l){if(f.match(/#/)){var i=window.location.href.split("#")[0];
f=f.replace(i,"");f!="#"&&a.facebox.reveal(a(f).html(),l)}else f.match(a.facebox.settings.imageTypesRegexp)?c(f,l):j(f,l)}function c(f,l){var i=new Image;i.onload=function(){a.facebox.reveal('<div class="image"><img src="'+i.src+'" /></div>',l)};i.src=f}function j(f,l){a.get(f,function(i){a.facebox.reveal(i,l)})}function h(){return a.facebox.settings.overlay==false||a.facebox.settings.opacity===null}function n(){if(!h()){a("#facebox_overlay").length==0&&a("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');
a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).fadeIn(200);return false}}function t(){if(!h()){a("#facebox_overlay").fadeOut(200,function(){a("#facebox_overlay").removeClass("facebox_overlayBG");a("#facebox_overlay").addClass("facebox_hide");a("#facebox_overlay").remove()});return false}}a.facebox=function(f,l){a.facebox.loading();if(f.ajax)j(f.ajax,l);else if(f.image)c(f.image,l);else if(f.div)g(f.div,
l);else a.isFunction(f)?f.call(a):a.facebox.reveal(f,l)};a.extend(a.facebox,{settings:{opacity:0,overlay:true,loadingImage:"/static/facebox/loading.gif",closeImage:"/static/facebox/closelabel.gif",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody id="facebox-tbody">             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             </tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="content">                 </div>                 <div class="footer">                   <a href="#" class="close">                     <img src="/static/facebox/closelabel.gif" title="close" class="close_image" />                   </a>                 </div>               </td>               <td class="b"/>             </tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             </tr>           </tbody>         </table>       </div>     </div>'},
loading:function(){k();if(a("#facebox .loading").length==1)return true;n();a("#facebox .content").empty();a("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a("#facebox").css({top:b()[1]+d()/10,left:a(window).width()/2-205}).show();a(document).bind("keydown.facebox",function(f){f.keyCode==27&&a.facebox.close();return true});a(document).trigger("loading.facebox")},reveal:function(f,l){a(document).trigger("beforeReveal.facebox");
l&&a("#facebox .content").addClass(l);a("#facebox .content").append(f);a("#facebox .loading").remove();a("#facebox .body").children().fadeIn("normal");a("#facebox").css("left",a(window).width()/2-a("#facebox table").width()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){a(document).trigger("close.facebox");return false}});a.fn.facebox=function(f){function l(){a.facebox.loading(true);var i=this.rel.match(/facebox\[?\.(\w+)\]?/);if(i)i=i[1];g(this.href,i);
return false}if(a(this).length!=0){k(f);return this.bind("click.facebox",l)}};a(document).bind("close.facebox",function(){a(document).unbind("keydown.facebox");a("#facebox").fadeOut(function(){a("#facebox .content").removeClass().addClass("content");t();a("#facebox .loading").remove();a(document).trigger("afterClose.facebox")})})})(jQuery);(function(a){a.fn.tipsy=function(k){k=a.extend({},a.fn.tipsy.defaults,k);return this.each(function(){var b=a.fn.tipsy.elementOptions(this,k);a(this).hover(function(){a.data(this,"cancel.tipsy",true);var d=a.data(this,"active.tipsy");if(!d){d=a('<div class="tipsy"><div class="tipsy-inner"/></div>');d.css({position:"absolute",zIndex:1E5});a.data(this,"active.tipsy",d)}if(a(this).attr("title")||typeof a(this).attr("original-title")!="string")a(this).attr("original-title",a(this).attr("title")||"").removeAttr("title");
var e;if(typeof b.title=="string")e=a(this).attr(b.title=="title"?"original-title":b.title);else if(typeof b.title=="function")e=b.title.call(this);d.find(".tipsy-inner")[b.html?"html":"text"](e||b.fallback);e=a.extend({},a(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});d.get(0).className="tipsy";d.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var g=d[0].offsetWidth,c=d[0].offsetHeight;switch((typeof b.gravity=="function"?b.gravity.call(this):
b.gravity).charAt(0)){case "n":d.css({top:e.top+e.height,left:e.left+e.width/2-g/2}).addClass("tipsy-north");break;case "s":d.css({top:e.top-c,left:e.left+e.width/2-g/2}).addClass("tipsy-south");break;case "e":d.css({top:e.top+e.height/2-c/2,left:e.left-g}).addClass("tipsy-east");break;case "w":d.css({top:e.top+e.height/2-c/2,left:e.left+e.width}).addClass("tipsy-west");break}b.fade?d.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.8}):d.css({visibility:"visible"})},function(){a.data(this,
"cancel.tipsy",false);var d=this;setTimeout(function(){if(!a.data(this,"cancel.tipsy")){var e=a.data(d,"active.tipsy");b.fade?e.stop().fadeOut(function(){a(this).remove()}):e.remove()}},100)})})};a.fn.tipsy.elementOptions=function(k,b){return a.metadata?a.extend({},b,a(k).metadata()):b};a.fn.tipsy.defaults={fade:false,fallback:"",gravity:"n",html:false,title:"title"};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>
a(document).scrollLeft()+a(window).width()/2?"e":"w"}})(jQuery);(function(a){function k(){var c=b(this);isNaN(c.datetime)||a(this).text(d(c.datetime));return this}function b(c){c=a(c);if(!c.data("timeago")){c.data("timeago",{datetime:g.datetime(c)});var j=a.trim(c.text());j.length>0&&c.attr("title",j)}return c.data("timeago")}function d(c){return g.inWords(e(c))}function e(c){return(new Date).getTime()-c.getTime()}a.timeago=function(c){return c instanceof Date?d(c):typeof c=="string"?d(a.timeago.parse(c)):d(a.timeago.datetime(c))};var g=a.timeago;a.extend(a.timeago,
{settings:{refreshMillis:6E4,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(c){function j(q,v){return(a.isFunction(q)?q(v):q).replace(/%d/i,h.numbers&&h.numbers[v]||v)}var h=this.settings.strings,
n=h.prefixAgo,t=h.suffixAgo;if(this.settings.allowFuture){if(c<0){n=h.prefixFromNow;t=h.suffixFromNow}c=Math.abs(c)}c=c/1E3;var f=c/60,l=f/60,i=l/24,m=i/365;c=c<45&&j(h.seconds,Math.round(c))||c<90&&j(h.minute,1)||f<45&&j(h.minutes,Math.round(f))||f<90&&j(h.hour,1)||l<24&&j(h.hours,Math.round(l))||l<48&&j(h.day,1)||i<30&&j(h.days,Math.floor(i))||i<60&&j(h.month,1)||i<365&&j(h.months,Math.floor(i/30))||m<2&&j(h.year,1)||j(h.years,Math.floor(m));return a.trim([n,c,t].join(" "))},parse:function(c){c=
a.trim(c);c=c.replace(/\.\d\d\d/,"");c=c.replace(/-/,"/").replace(/-/,"/");c=c.replace(/T/," ").replace(/Z/," UTC");c=c.replace(/([\+-]\d\d)\:?(\d\d)/," $1$2");return new Date(c)},datetime:function(c){c=a(c).get(0).tagName.toLowerCase()=="time"?a(c).attr("datetime"):a(c).attr("title");return g.parse(c)}});a.fn.timeago=function(){var c=this;c.each(k);var j=g.settings;j.refreshMillis>0&&setInterval(function(){c.each(k)},j.refreshMillis);return c};document.createElement("abbr");document.createElement("time")})(jQuery);(function(a){function k(){a.fn.ajaxSubmit.debug&&window.console&&window.console.log&&window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}a.fn.ajaxSubmit=function(b){function d(){function f(){if(!z++){s.detachEvent?s.detachEvent("onload",f):s.removeEventListener("load",f,false);var u=true;try{if(A)throw"timeout";var r,p;p=s.contentWindow?s.contentWindow.document:s.contentDocument?s.contentDocument:s.document;var w=m.dataType=="xml"||p.XMLDocument||a.isXMLDoc(p);k("isXml="+
w);if(!w&&(p.body==null||p.body.innerHTML=="")){if(--E){z=0;setTimeout(f,100);return}k("Could not access iframe DOM after 50 tries.");return}o.responseText=p.body?p.body.innerHTML:null;o.responseXML=p.XMLDocument?p.XMLDocument:p;o.getResponseHeader=function(F){return{"content-type":m.dataType}[F]};if(m.dataType=="json"||m.dataType=="script"){var B=p.getElementsByTagName("textarea")[0];if(B)o.responseText=B.value;else{var C=p.getElementsByTagName("pre")[0];if(C)o.responseText=C.innerHTML}}else if(m.dataType==
"xml"&&!o.responseXML&&o.responseText!=null)o.responseXML=l(o.responseText);r=a.httpData(o,m.dataType)}catch(G){u=false;a.handleError(m,o,"error",G)}if(u){m.success(r,"success");x&&a.event.trigger("ajaxSuccess",[o,m])}x&&a.event.trigger("ajaxComplete",[o,m]);x&&!--a.active&&a.event.trigger("ajaxStop");if(m.complete)m.complete(o,u?"success":"error");setTimeout(function(){y.remove();o.responseXML=null},100)}}function l(u,r){if(window.ActiveXObject){r=new ActiveXObject("Microsoft.XMLDOM");r.async="false";
r.loadXML(u)}else r=(new DOMParser).parseFromString(u,"text/xml");return r&&r.documentElement&&r.documentElement.tagName!="parsererror"?r:null}var i=h[0];if(a(":input[name=submit]",i).length)alert('Error: Form elements must not be named "submit".');else{var m=a.extend({},a.ajaxSettings,b),q=a.extend(true,{},a.extend(true,{},a.ajaxSettings),m),v="jqFormIO"+(new Date).getTime(),y=a('<iframe id="'+v+'" name="'+v+'" src="'+m.iframeSrc+'" />'),s=y[0];y.css({position:"absolute",top:"-1000px",left:"-1000px"});
var o={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1;y.attr("src",m.iframeSrc)}},x=m.global;x&&!a.active++&&a.event.trigger("ajaxStart");x&&a.event.trigger("ajaxSend",[o,m]);if(q.beforeSend&&q.beforeSend(o,q)===false)q.global&&a.active--;else if(!o.aborted){var z=0,A=0;if(q=i.clk){var D=q.name;if(D&&!q.disabled){b.extraData=b.extraData||{};b.extraData[D]=
q.value;if(q.type=="image"){b.extraData[name+".x"]=i.clk_x;b.extraData[name+".y"]=i.clk_y}}}setTimeout(function(){var u=h.attr("target"),r=h.attr("action");i.setAttribute("target",v);i.getAttribute("method")!="POST"&&i.setAttribute("method","POST");i.getAttribute("action")!=m.url&&i.setAttribute("action",m.url);b.skipEncodingOverride||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});m.timeout&&setTimeout(function(){A=true;f()},m.timeout);var p=[];try{if(b.extraData)for(var w in b.extraData)p.push(a('<input type="hidden" name="'+
w+'" value="'+b.extraData[w]+'" />').appendTo(i)[0]);y.appendTo("body");s.attachEvent?s.attachEvent("onload",f):s.addEventListener("load",f,false);i.submit()}finally{i.setAttribute("action",r);u?i.setAttribute("target",u):h.removeAttr("target");a(p).remove()}},10);var E=50}}}if(!this.length){k("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof b=="function")b={success:b};var e=a.trim(this.attr("action"));if(e)e=(e.match(/^([^#]+)/)||[])[1];e=e||window.location.href||
"";b=a.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b||{});e={};this.trigger("form-pre-serialize",[this,b,e]);if(e.veto){k("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(b.beforeSerialize&&b.beforeSerialize(this,b)===false){k("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var g=this.formToArray(b.semantic);if(b.data){b.extraData=b.data;for(var c in b.data)if(b.data[c]instanceof
Array)for(var j in b.data[c])g.push({name:c,value:b.data[c][j]});else g.push({name:c,value:b.data[c]})}if(b.beforeSubmit&&b.beforeSubmit(g,this,b)===false){k("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[g,this,b,e]);if(e.veto){k("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}c=a.param(g);if(b.type.toUpperCase()=="GET"){b.url+=(b.url.indexOf("?")>=0?"&":"?")+c;b.data=null}else b.data=c;var h=this,n=[];b.resetForm&&
n.push(function(){h.resetForm()});b.clearForm&&n.push(function(){h.clearForm()});if(!b.dataType&&b.target){var t=b.success||function(){};n.push(function(f){a(b.target).html(f).each(t,arguments)})}else b.success&&n.push(b.success);b.success=function(f,l){for(var i=0,m=n.length;i<m;i++)n[i].apply(b,[f,l,h])};c=a("input:file",this).fieldValue();j=false;for(e=0;e<c.length;e++)if(c[e])j=true;if(c.length&&b.iframe!==false||b.iframe||j||0)b.closeKeepAlive?a.get(b.closeKeepAlive,d):d();else a.ajax(b);this.trigger("form-submit-notify",
[this,b]);return this};a.fn.ajaxForm=function(b){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){a(this).ajaxSubmit(b);return false}).bind("click.form-plugin",function(d){var e=d.target,g=a(e);if(!g.is(":submit,input:image")){e=g.closest(":submit");if(e.length==0)return;e=e[0]}var c=this;c.clk=e;if(e.type=="image")if(d.offsetX!=undefined){c.clk_x=d.offsetX;c.clk_y=d.offsetY}else if(typeof a.fn.offset=="function"){g=g.offset();c.clk_x=d.pageX-g.left;c.clk_y=d.pageY-g.top}else{c.clk_x=
d.pageX-e.offsetLeft;c.clk_y=d.pageY-e.offsetTop}setTimeout(function(){c.clk=c.clk_x=c.clk_y=null},100)})};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};a.fn.formToArray=function(b){var d=[];if(this.length==0)return d;var e=this[0],g=b?e.getElementsByTagName("*"):e.elements;if(!g)return d;for(var c=0,j=g.length;c<j;c++){var h=g[c],n=h.name;if(n)if(b&&e.clk&&h.type=="image"){if(!h.disabled&&e.clk==h){d.push({name:n,value:a(h).val()});d.push({name:n+".x",
value:e.clk_x},{name:n+".y",value:e.clk_y})}}else if((h=a.fieldValue(h,true))&&h.constructor==Array)for(var t=0,f=h.length;t<f;t++)d.push({name:n,value:h[t]});else h!==null&&typeof h!="undefined"&&d.push({name:n,value:h})}if(!b&&e.clk){b=a(e.clk);g=b[0];if((n=g.name)&&!g.disabled&&g.type=="image"){d.push({name:n,value:b.val()});d.push({name:n+".x",value:e.clk_x},{name:n+".y",value:e.clk_y})}}return d};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var d=
[];this.each(function(){var e=this.name;if(e){var g=a.fieldValue(this,b);if(g&&g.constructor==Array)for(var c=0,j=g.length;c<j;c++)d.push({name:e,value:g[c]});else g!==null&&typeof g!="undefined"&&d.push({name:this.name,value:g})}});return a.param(d)};a.fn.fieldValue=function(b){for(var d=[],e=0,g=this.length;e<g;e++){var c=a.fieldValue(this[e],b);c===null||typeof c=="undefined"||c.constructor==Array&&!c.length||(c.constructor==Array?a.merge(d,c):d.push(c))}return d};a.fieldValue=function(b,d){var e=
b.name,g=b.type,c=b.tagName.toLowerCase();if(typeof d=="undefined")d=true;if(d&&(!e||b.disabled||g=="reset"||g=="button"||(g=="checkbox"||g=="radio")&&!b.checked||(g=="submit"||g=="image")&&b.form&&b.form.clk!=b||c=="select"&&b.selectedIndex==-1))return null;if(c=="select"){c=b.selectedIndex;if(c<0)return null;d=[];b=b.options;e=(g=g=="select-one")?c+1:b.length;for(c=g?c:0;c<e;c++){var j=b[c];if(j.selected){var h=j.value;h||(h=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:
j.value);if(g)return h;d.push(h)}}return d}return b.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var b=this.type,d=this.tagName.toLowerCase();if(b=="text"||b=="password"||d=="textarea")this.value="";else if(b=="checkbox"||b=="radio")this.checked=false;else if(d=="select")this.selectedIndex=-1})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset==
"function"||typeof this.reset=="object"&&!this.reset.nodeType)this.reset()})};a.fn.enable=function(b){if(b==undefined)b=true;return this.each(function(){this.disabled=!b})};a.fn.selected=function(b){if(b==undefined)b=true;return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio")this.checked=b;else if(this.tagName.toLowerCase()=="option"){d=a(this).parent("select");b&&d[0]&&d[0].type=="select-one"&&d.find("option").selected(false);this.selected=b}})}})(jQuery);if(!window.SI)var SI={};
SI.Files={htmlClass:"html-home",fileClass:"file",wrapClass:"droplet",fini:false,able:false,init:function(){this.fini=true;if(!(window.opera||!document.getElementsByTagName)){this.able=true;var a=document.getElementsByTagName("html")[0];a.className+=(a.className!=""?" ":"")+this.htmlClass}},stylize:function(a){this.fini||this.init();if(this.able){a.parentNode.file=a;a.parentNode.onmousemove=function(k){if(typeof k=="undefined")k=window.event;if(typeof k.pageY=="undefined"&&typeof k.clientX=="number"&&
document.documentElement){k.pageX=k.clientX+document.documentElement.scrollLeft;k.pageY=k.clientY+document.documentElement.scrollTop}var b=oy=0,d=this;if(d.offsetParent){b=d.offsetLeft;for(oy=d.offsetTop;d=d.offsetParent;){b+=d.offsetLeft;oy+=d.offsetTop}}b=k.pageX-b;d=this.file.offsetWidth;this.file.style.top=k.pageY-oy-this.file.offsetHeight/2+"px";this.file.style.left=b-(d-30)+"px"}}},stylizeById:function(a){this.stylize(document.getElementById(a))},stylizeAll:function(){this.fini||this.init();
if(this.able)for(var a=document.getElementsByTagName("input"),k=0;k<a.length;k++){var b=a[k];b.type=="file"&&b.className.indexOf(this.fileClass)!=-1&&b.parentNode.className.indexOf(this.wrapClass)!=-1&&this.stylize(b)}}};
